{% extends "layout.html" %}

{% block content %}
<section class="panel centered admin-panel">
  <h2 class="h2" style="margin-bottom: 20px;">Gestion des champions</h2>

  <div class="admin-buttons">
    <button id="add-champ" class="btn">+ Ajouter un champion</button>
    <button id="save-changes" class="btn btn-ghost">üíæ Sauvegarder localement</button>
    <button id="reset-data" class="btn btn-ghost">‚Ü©Ô∏è Restaurer la base</button>
    <button id="export-payload" class="btn btn-ghost">üì¶ Exporter / Proposer</button>
    <button id="toggle-delete" class="btn btn-ghost">üóëÔ∏è Mode suppression</button>
  </div>

  <p class="tip" style="margin-top: 16px;">
    Les modifications sont enregistr√©es dans ton navigateur uniquement. Exporter te permet
    de partager une proposition sans impacter les autres utilisateurs.
  </p>

  <div id="admin-grid" class="admin-grid"></div>
</section>

<div id="admin-modal" class="admin-overlay hidden" role="dialog" aria-modal="true">
  <div class="admin-modal">
    <h3>Ajouter un champion</h3>

    <label for="champ-name">Nom du champion :</label>
    <input id="champ-name" class="admin-input" placeholder="Ex: Bel'Veth">

    <div class="admin-attrs" id="attrs-container">
      {% for key, label in reason_labels.items() %}
      <label class="admin-attr">
        <input type="checkbox" data-key="{{ key }}" class="attr-checkbox">
        {{ label }}
      </label>
      {% endfor %}
    </div>

    <label for="champ-icon" style="margin-top:12px;">Ic√¥ne personnalis√©e (URL) :</label>
    <input id="champ-icon" class="admin-input" placeholder="https://‚Ä¶">

    <label class="admin-attr" style="margin-top:12px;">
      <input type="checkbox" id="champ-icon-placeholder">
      Utiliser l'ic√¥ne placeholder (default.png)
    </label>

    <div class="admin-modal-actions">
      <button id="cancel-add" class="btn btn-ghost">Annuler</button>
      <button id="confirm-add" class="btn">Sauvegarder</button>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  window.__SERVER_CHAMPIONS__ = {{ champions | tojson | safe }};
  window.__REASON_LABELS__ = {{ reason_labels | tojson | safe }};
  window.__REASON_WEIGHTS__ = {{ reason_weights | tojson | safe }};
  window.__DEFAULT_ICON__ = "{{ default_icon }}";
</script>
<script src="{{ url_for('static', filename='js/admin.js') }}"></script>
{% endblock %}
